<!-- include header -->
<% include common/loggedIn-header %>
<!-- / end include -->	

      <div class="main_content">
        <div class="inner_fixed_tbar">
          <div class="container-fluid">
            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item">
                <a class="nav-link active first_tab_link" data-toggle="tab" href="#faq_tab">FAQ</a>
              </li>

              <li class="nav-item">
                <a class="nav-link second_tab_link" data-toggle="tab" href="#tutorial_tab">Tutorial Guides</a>
              </li>
            </ul>
          </div>
        </div>


        <div class="container-fluid">
          <div class="tab-content page_tab_content">
            <div id="faq_tab" class="tab-pane active">
              <div id="accordion" class="accordion_sec">
                <% if(result.length > 0){%>
                <div class="card">
                  <div class="card-header">
                    <a class="card-link" data-toggle="collapse" href="#collapse_01">
                     <%= result[0].question %>
                    </a>
                  </div>
                  <div id="collapse_01" class="collapse show" data-parent="#accordion">
                    <div class="card-body">
                      <%- result[0].answer %> 
                    </div>
                  </div>
                </div>
                <% } %>
                <% for(var i=1; i<result.length; i++) { %>
                <div class="card">
                  <div class="card-header">
                    <a class="card-link collapsed" data-toggle="collapse" href="#collapse_<%=result[i]._id%>">
                     <%= result[i].question %>
                    </a>
                  </div>
                  <div id="collapse_<%=result[i]._id%>" class="collapse" data-parent="#accordion">
                    <div class="card-body">
                      <%- result[i].answer %> 
                    </div>
                  </div>
                </div>
              <% } %>
              </div>
              <!-- end:accordion_sec -->

              <div class="submit_feedback">
                <div class="feedback_title">
                  <h3 class="feedback_title_heading collapsed" data-toggle="collapse" data-target="#demo">Submit a Request/Feedback</h3>
                </div>
      
                <div class="feedback_form" id="demo">
                  <p>If you have any question or suggestion please fil the below form and we will get in touch with you.</p>
                  <form name="Faq_request" role="form" method="POST" id="Faq_request">
                    <div class="row">
                      <!-- <div class="col-md-6">
                        <div class="form-group">
                          <label>Email Address</label> 
                          <input type="email" name="email" id="email" class="form-control" placeholder="Enter email">
                        </div>
                      </div> -->
                      <% if( userCustomerSession.role_id == 2){ %>
                        <div class="col-md-6" style="display:none">
                          <div class="form-group">
                            <label>User Type</label>
                            <select class="form-control" name="user_type" id="user_type">
                              <option value="Customer">Customer</option>
                              <!-- <option value="Service_provider">Business Owner</option> -->
                            </select>
                          </div>
                        </div>
                      <% } else { %>
                        <div class="col-md-6" style="display:none">
                          <div class="form-group">
                            <label>User Type</label>
                            <select class="form-control" name="user_type" id="user_type">
                              <!-- <option value="Customer">Customer</option> -->
                              <option value="Business Owner">Business Owner</option>
                            </select>
                          </div>
                        </div>
                      <% } %>
        
                      <div class="col-md-12">
                        <div class="form-group">
                          <label>Subject</label>
                          <select class="form-control" name="subject" id="subject">
                            <!-- <option value="OYOapp">OYOapp</option>
                            <option value="Issue">Issue</option>
                            <option value="PR">PR</option>
                            <option value="Other">Other</option> -->
                            <option value="HomeIssue">Home Issue</option>
                            <option value="Appointment Issue ">Appointment Issue</option>
                            <option value="Client Issue">Client Issue</option>
                            <option value="Business Owner Issue">Business Owner Issue</option>
                            <option value="Performance Dashboard Issue">Performance Dashboard Issue</option>
                            <option value="Payment Issue">Payment Issue</option>
                            <option value="My Services Issue">My Services Issue</option>
                            <option value="Settings Issue">Settings Issue</option>
                            <option value="Other Issue">Other Issue</option>
                          </select>
                        </div>
                      </div>
        
                      <div class="col-md-12">
                        <div class="form-group">
                          <label>Description</label>
                          <textarea class="form-control" cols="30" rows="6" name="description" id="description"></textarea>
                        </div>
                      </div>
        
                      <div class="col-md-12" style="text-align: center;">
                        <div class="form-group">
                          <p class="g-recaptcha" id="catpcha" name="catpcha" 
                              data-sitekey="6Lck4v0aAAAAAPjZsap7oVDBkEAuvKgr3mwUbjv5">
                          </p>
                        </div>
                      </div>
        
                      <div class="col-md-12">
                        <button type="submit" class="btn btn_sty_1" style="min-width: 135px;">Submit</button>
                      </div>
        
                    </div>
                  </form>
                </div>
              </div>
              <!-- end:submit_feedback -->

            </div>
            <!-- end:faq_tab -->

            <div id="tutorial_tab" class="tab-pane fade">
              <!-- <ul class="tutorial_list">
                <li> -->
            <div class="tab-content page_tab_content">
              <div id="faq_tab" class="tab-pane active">
              
                <div id="accordion" class="accordion_sec">
                  <% if(tutorial.length > 0){%>
                  <div class="card">
                    <div class="card-header">
                      <a class="card-link" data-toggle="collapse" href="#collapse_001">
                        <%= tutorial[0].question %> 
                      </a>
                    </div>
                    <div id="collapse_001" class="collapse show" data-parent="#accordion">
                      <div class="card-body">
                        <%- tutorial[0].answer %>
                      </div>
                    </div>
                 </div> 
                 <% } %>	
                </div>
              
                <div id="accordion" class="accordion_sec">
                  <% for(var i=1; i<tutorial.length; i++) { %>
                  <div class="card">
                    <div class="card-header">
                      <a class="card-link collapsed" data-toggle="collapse" href="#collapse_<%=tutorial[i]._id%>">
                        <%= tutorial[i].question %> 
                      </a>
                    </div>
                    <div id="collapse_<%=tutorial[i]._id%>" class="collapse" data-parent="#accordion">
                      <div class="card-body">
                        <%- tutorial[i].answer %>
                      </div>
                    </div>
                 </div> 
                 <% } %>
                </div>
             </div>
            </div>
                <!-- </li>
                <li><a href="#"><i class="icofont-simple-right"></i> How to book appointments</a></li>
                <li><a href="#"><i class="icofont-simple-right"></i> How to import clients</a></li>
                <li><a href="#"><i class="icofont-simple-right"></i> How to make payments</a></li>
                <li><a href="#"><i class="icofont-simple-right"></i> How to view old transactions</a></li>
                <li><a href="#"><i class="icofont-simple-right"></i> How to setup my account</a></li>
              </ul> -->
            </div>
            <!-- end:tutorial_tab -->
          </div>
        </div>
        
      </div>
        
        
      </div>
      <!-- end:main_content -->
    </div>
    <!-- end:middle_block -->


    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="<%- baseUrl %>validation/jquery.validate.min.js"></script>
    <script src="<%- baseUrl %>validation/custom.validate.js"></script>
    <script src="https://www.google.com/recaptcha/api.js"></script>
    <script src="<%- baseUrl %>js/sweetalert2.js"></script>



    <script>
      $(document).ready(function(){

        $("form[name='Faq_request']").validate({
            ignore: [],
            debug: false,
            rules: {
              email: {
                required: true,
              },
              user_type: {
                required: true
              },
              subject: {
                required: true
              },
              description: {
                required: true
              },
            },
            messages:{
              email:{
                  required: 'Please enter your email address.'
              },
              user_type: {
                         required: 'Please select user type.'
              },
              subject: {
                         required: 'Please select subject.'
              },
              description: {
                         required: 'Please enter a description.'
              },
            },
      
            submitHandler: function (form) {
              let a = document.getElementById("#g-recaptcha-response");
              $(":submit").attr("disabled", true);
            //	form.submit();
              $.ajax({
                 type: "POST",
                 url: "<%- baseUrl %>customer/faq_request",
                 data: $('#Faq_request').serialize(), // serializes the form's elements.
                 success: function(data)
                 {
                   if(data.success == true){
                    Swal.fire("Your feedback has been submitted.")
                     $("#Faq_request")[0].reset();
                     grecaptcha.reset();
                     location.reload();    // to reload the same page again
                     window.location.href = "<%- baseUrl %>customer/faq"; 
                   }
                   else{
                    Swal.fire(data.msg);
                   }
                 }
               });
            }
          });

        $(".mobile_menu_btn").click(function(){
          $(".mobile_menu").addClass("menu_open");
        });

        $(".menu_close").click(function(){
          $(".mobile_menu").removeClass("menu_open");
        });
      });
    </script>
     <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
     <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-messaging.js"></script>
     <script>
       $(document).ready(function () {
          var firebaseConfig = {
            apiKey: "AIzaSyBknM87YF_6scofTVWZMFwHFtSVCBh2Fus",
            authDomain: "pro01-29e4b.firebaseapp.com",
            projectId: "pro01-29e4b",
            storageBucket: "pro01-29e4b.appspot.com",
            messagingSenderId: "716669500088",
            appId: "1:716669500088:web:496098fdb040e20581124d"
          };

          // Initialize Firebase
          firebase.initializeApp(
            firebaseConfig
          );
          const messaging = firebase.messaging();
          messaging.onMessage(function (payload) {
            console.log("message recived ..", payload);
            const notificationTitle = payload.notification.title;
            const notificationOptions = {
              body: payload.notification.body,
              icon: payload.notification.icon,
            };
            if (!("Notification" in window)) {
              console.log("This browser does not support system notifications");
            }
            // Let's check whether notification permissions have already been granted
            else if (Notification.permission === "granted") {
              console.log(" Notification  permission  granted");
              // If it's okay let's create a notification 
              var notification = new Notification(notificationTitle, notificationOptions);
              notification.onclick = function (event) {
                event.preventDefault(); // prevent the browser from focusing the Notification's tab
                window.open(payload.notification.click_action, '_blank');
                notification.close();
              }
            }
          })
        })
     </script>
  
  </body>
</html>